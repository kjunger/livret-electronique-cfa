(function(){var e;e=window.jQuery||window.Zepto||window.$,e.fn.fancySelect=function(s){var n,t;return null==s&&(s={}),t=e.extend({forceiOS:!1,includeBlank:!1,optionTemplate:function(e){return e.text()},triggerTemplate:function(e){return e.text()}},s),n=!!navigator.userAgent.match(/iP(hone|od|ad)/i),this.each(function(){var s,i,a,r,l,o,f;return r=e(this),r.hasClass("fancified")||"SELECT"!==r[0].tagName?void 0:(r.addClass("fancified"),r.css({width:1,height:1,display:"block",position:"absolute",top:0,left:0,opacity:0}),r.wrap('<div class="select">'),f=r.parent(),r.data("class")&&f.addClass(r.data("class")),f.append('<div class="trigger">'),(!n||t.forceiOS)&&f.append('<ul class="options">'),l=f.find(".trigger"),a=f.find(".options"),i=r.prop("disabled"),i&&f.addClass("disabled"),o=function(){var e;return e=t.triggerTemplate(r.find(":selected")),l.html(e)},r.on("blur.fs",function(){return l.hasClass("open")?setTimeout(function(){return l.trigger("close.fs")},120):void 0}),l.on("close.fs",function(){return l.removeClass("open"),a.removeClass("open")}),l.on("click.fs",function(){var s,o;if(!i)if(l.toggleClass("open"),n&&!t.forceiOS){if(l.hasClass("open"))return r.focus()}else if(l.hasClass("open")&&(o=l.parent(),s=o.offsetParent(),o.offset().top+o.outerHeight()+a.outerHeight()+20>e(window).height()+e(window).scrollTop()?a.addClass("overflowing"):a.removeClass("overflowing")),a.toggleClass("open"),!n)return r.focus()}),r.on("enable",function(){return r.prop("disabled",!1),f.removeClass("disabled"),i=!1,s()}),r.on("disable",function(){return r.prop("disabled",!0),f.addClass("disabled"),i=!0}),r.on("change.fs",function(e){return e.originalEvent&&e.originalEvent.isTrusted?e.stopPropagation():o()}),r.on("keydown",function(e){var s,n,t;if(t=e.which,s=a.find(".hover"),s.removeClass("hover"),a.hasClass("open")){if(38===t?(e.preventDefault(),s.length&&s.index()>0?s.prev().addClass("hover"):a.find("li:last-child").addClass("hover")):40===t?(e.preventDefault(),s.length&&s.index()<a.find("li").length-1?s.next().addClass("hover"):a.find("li:first-child").addClass("hover")):27===t?(e.preventDefault(),l.trigger("click.fs")):13===t||32===t?(e.preventDefault(),s.trigger("mousedown.fs")):9===t&&l.hasClass("open")&&l.trigger("close.fs"),n=a.find(".hover"),n.length)return a.scrollTop(0),a.scrollTop(n.position().top-12)}else if(13===t||32===t||38===t||40===t)return e.preventDefault(),l.trigger("click.fs")}),a.on("mousedown.fs","li",function(s){var t;return t=e(this),r.val(t.data("raw-value")),n||r.trigger("blur.fs").trigger("focus.fs"),a.find(".selected").removeClass("selected"),t.addClass("selected"),l.addClass("selected"),r.val(t.data("raw-value")).trigger("change.fs").trigger("blur.fs").trigger("focus.fs")}),a.on("mouseenter.fs","li",function(){var s,n;return n=e(this),s=a.find(".hover"),s.removeClass("hover"),n.addClass("hover")}),a.on("mouseleave.fs","li",function(){return a.find(".hover").removeClass("hover")}),s=function(){var s;return o(),!n||t.forceiOS?(s=r.find("option"),r.find("option").each(function(s,n){var i;return n=e(n),n.prop("disabled")||!n.val()&&!t.includeBlank?void 0:(i=t.optionTemplate(n),n.prop("selected")?a.append('<li data-raw-value="'+n.val()+'" class="selected">'+i+"</li>"):a.append('<li data-raw-value="'+n.val()+'">'+i+"</li>"))})):void 0},r.on("update.fs",function(){return f.find(".options").empty(),s()}),s())})}}).call(this);
